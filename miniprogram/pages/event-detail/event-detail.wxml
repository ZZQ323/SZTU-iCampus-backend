<view class="event-detail">
  <custom-navbar title="æ´»åŠ¨è¯¦æƒ…" showBack="{{true}}" background="#9c27b0"></custom-navbar>
  
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <view wx:else class="detail-container">
    <!-- æ´»åŠ¨æ ‡é¢˜å’ŒåŸºæœ¬ä¿¡æ¯ -->
    <view class="event-header">
      <text class="event-title">{{event.title}}</text>
      <view class="event-meta">
        <view class="meta-item">
          <text class="meta-label">æ´»åŠ¨æ—¶é—´</text>
          <text class="meta-value">{{event.startTime}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-label">æ´»åŠ¨åœ°ç‚¹</text>
          <text class="meta-value">{{event.location}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-label">ä¸»åŠæ–¹</text>
          <text class="meta-value">{{event.organizer}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-label">å‚ä¸äººæ•°</text>
          <text class="meta-value">{{event.participants}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-label">æ´»åŠ¨çŠ¶æ€</text>
          <text class="meta-value {{event.status === 'ongoing' ? 'status-ongoing' : (event.status === 'upcoming' ? 'status-upcoming' : 'status-ended')}}">
            {{event.status === 'upcoming' ? 'ğŸŸ¡ å³å°†å¼€å§‹' : (event.status === 'ongoing' ? 'ğŸŸ¢ è¿›è¡Œä¸­' : 'ğŸ”´ å·²ç»“æŸ')}}
          </text>
        </view>
      </view>
    </view>

    <!-- æ´»åŠ¨å†…å®¹ -->
    <view class="event-content">
      <text class="content-text">{{event.description}}</text>
      
      <view wx:if="{{event.agenda}}" class="content-section">
        <view class="section-title">ğŸ“… æ´»åŠ¨å®‰æ’</view>
        <text class="section-content">{{event.agenda}}</text>
      </view>

      <view wx:if="{{event.requirements}}" class="content-section">
        <view class="section-title">âš ï¸ å‚ä¸è¦æ±‚</view>
        <text class="section-content">{{event.requirements}}</text>
      </view>

      <view wx:if="{{event.contact}}" class="content-section">
        <view class="section-title">ğŸ“ è”ç³»æ–¹å¼</view>
        <text class="section-content">{{event.contact}}</text>
      </view>

      <view wx:if="{{event.reward}}" class="content-section">
        <view class="section-title">ğŸ æ´»åŠ¨å¥–åŠ±</view>
        <text class="section-content">{{event.reward}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="action-btn {{isFollowed ? 'followed' : 'secondary'}}" bind:tap="onFollow">
        <text class="btn-icon">{{isFollowed ? 'â­' : 'â˜†'}}</text>
        <text class="btn-text">{{isFollowed ? 'å·²å…³æ³¨' : 'å…³æ³¨'}}</text>
      </button>
      
      <button class="action-btn {{isRegistered ? 'registered' : 'primary'}}" bind:tap="onRegister">
        <text class="btn-icon">{{isRegistered ? 'âœ…' : 'ğŸ“'}}</text>
        <text class="btn-text">{{isRegistered ? 'å·²æŠ¥å' : 'æŠ¥å'}}</text>
      </button>
      
      <button class="action-btn secondary" bind:tap="onShare">
        <text class="btn-icon">ğŸ”—</text>
        <text class="btn-text">åˆ†äº«</text>
      </button>
    </view>

    <!-- ç›¸å…³ä¿¡æ¯ -->
    <view class="related-info">
      <view class="info-item">
        <text class="info-label">æ•°æ®æ¥æº</text>
        <text class="info-value realtime">ğŸŒŠ å®æ—¶æ›´æ–°</text>
      </view>
    </view>
  </view>
</view> 