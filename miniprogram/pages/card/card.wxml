<!-- 校园卡快速操作面板 -->
<view class="page">
  <view class="bblank"></view>
  
  <!-- 卡片状态 -->
  <view class="card-status">
    <view class="balance-card">
      <view class="balance-header">
        <text class="balance-label">校园卡余额</text>
        <view class="status-indicator {{isLost ? 'lost' : 'normal'}}">
          <text>{{isLost ? '已挂失' : '正常'}}</text>
        </view>
      </view>
      <view class="balance-amount">¥{{balance}}</view>
      <view class="card-info">
        <text>卡号：{{cardNumber}}</text>
        <text>{{lastUpdateTime}}</text>
      </view>
    </view>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions">
    <view class="action-title">快速操作</view>
    <view class="action-grid">
      <view class="action-item" bindtap="onQuickRecharge">
        <image src="assets/icons/recharge.png" class="action-icon" mode="aspectFit"></image>
        <text class="action-text">快速充值</text>
      </view>
      <view class="action-item" bindtap="onViewRecords">
        <image src="assets/icons/record.png" class="action-icon" mode="aspectFit"></image>
        <text class="action-text">消费记录</text>
      </view>
      <view class="action-item {{isLost ? 'danger' : ''}}" bindtap="onToggleLost">
        <image src="assets/icons/lost.png" class="action-icon" mode="aspectFit"></image>
        <text class="action-text">{{isLost ? '解除挂失' : '紧急挂失'}}</text>
      </view>
      <view class="action-item" bindtap="onViewFullCard">
        <image src="assets/icons/wallet.png" class="action-icon" mode="aspectFit"></image>
        <text class="action-text">完整版本</text>
      </view>
    </view>
  </view>

  <!-- 快速充值选项 -->
  <view class="recharge-options" wx:if="{{!isLost}}">
    <view class="option-title">快速充值金额</view>
    <view class="amount-grid">
      <view 
        wx:for="{{rechargeOptions}}" 
        wx:key="*this" 
        class="amount-item"
        bindtap="onSelectAmount"
        data-amount="{{item}}"
      >
        <text>¥{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 使用提示 -->
  <view class="usage-tips">
    <view class="tips-title">💡 使用提示</view>
    <view class="tips-list">
      <text>• 点击快速充值可选择常用金额</text>
      <text>• 校园卡支持食堂、超市、图书馆等场所</text>
      <text>• 如遇问题可点击"完整版本"查看更多功能</text>
    </view>
  </view>
</view>

<!-- 充值确认弹窗 -->
<t-dialog
  visible="{{showRechargeDialog}}"
  title="确认充值"
  content="确定要充值 ¥{{selectedAmount}} 吗？"
  confirm-btn="确认充值"
  cancel-btn="取消"
  bind:confirm="onRechargeConfirm"
  bind:cancel="onRechargeCancel"
></t-dialog> 