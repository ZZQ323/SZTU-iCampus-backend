<view class="admin-container">
  <!-- ç®¡ç†å‘˜ä¿¡æ¯å¡ç‰‡ -->
  <view class="admin-header">
    <t-avatar size="large" image="{{adminInfo.avatar || '/assets/test/man.png'}}" />
    <view class="admin-info">
      <text class="admin-name">{{adminInfo.name || 'ç®¡ç†å‘˜'}}</text>
      <text class="admin-role">ğŸ”§ ç³»ç»Ÿç®¡ç†å‘˜</text>
    </view>
  </view>

  <!-- ç³»ç»Ÿç»Ÿè®¡ -->
  <view class="stats-section">
    <text class="section-title">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡</text>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{stats.user_count || 0}}</text>
        <text class="stat-label">ç”¨æˆ·æ€»æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.admin_count || 0}}</text>
        <text class="stat-label">ç®¡ç†å‘˜</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.announcement_count || 0}}</text>
        <text class="stat-label">å…¬å‘Šæ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.notice_count || 0}}</text>
        <text class="stat-label">é€šçŸ¥æ•°</text>
      </view>
    </view>
  </view>

  <!-- ç®¡ç†åŠŸèƒ½é€‰é¡¹å¡ -->
  <view class="management-section">
    <t-tabs value="{{activeTab}}" bind:change="onTabChange">
      <t-tab-panel label="ğŸ‘¥ ç”¨æˆ·ç®¡ç†" value="users">
        <view class="tab-content">
          <view wx:if="{{loading}}" class="loading-container">
            <t-loading theme="dots" text="åŠ è½½ä¸­..." />
          </view>
          <view wx:else>
            <view wx:if="{{users.length === 0}}" class="empty-container">
              <t-empty description="æš‚æ— ç”¨æˆ·æ•°æ®" />
            </view>
            <view wx:else>
              <t-cell-group>
                <t-cell 
                  wx:for="{{users}}" 
                  wx:key="id"
                  title="{{item.name}}"
                  description="å­¦å·ï¼š{{item.student_id}}"
                  right-icon="{{item.is_admin ? 'check-circle-filled' : 'user'}}"
                  bind:click="onUserClick"
                  data-user="{{item}}"
                >
                  <view slot="note">
                    <t-badge 
                      content="{{item.is_admin ? 'ç®¡ç†å‘˜' : 'æ™®é€šç”¨æˆ·'}}" 
                      theme="{{item.is_admin ? 'warning' : 'default'}}"
                    />
                  </view>
                </t-cell>
              </t-cell-group>
            </view>
          </view>
        </view>
      </t-tab-panel>

      <t-tab-panel label="ğŸ“¢ å…¬å‘Šç®¡ç†" value="announcements">
        <view class="tab-content">
          <view wx:if="{{loading}}" class="loading-container">
            <t-loading theme="dots" text="åŠ è½½ä¸­..." />
          </view>
          <view wx:else>
            <view wx:if="{{announcements.length === 0}}" class="empty-container">
              <t-empty description="æš‚æ— å…¬å‘Šæ•°æ®" />
            </view>
            <view wx:else>
              <t-cell-group>
                <t-cell 
                  wx:for="{{announcements}}" 
                  wx:key="id"
                  title="{{item.title}}"
                  description="{{item.department}} Â· {{item.date}}"
                  right-icon="delete"
                  bind:click="onAnnouncementDelete"
                  data-id="{{item.id}}"
                />
              </t-cell-group>
            </view>
          </view>
        </view>
      </t-tab-panel>

      <t-tab-panel label="ğŸ“‹ é€šçŸ¥ç®¡ç†" value="notices">
        <view class="tab-content">
          <view wx:if="{{loading}}" class="loading-container">
            <t-loading theme="dots" text="åŠ è½½ä¸­..." />
          </view>
          <view wx:else>
            <view wx:if="{{notices.length === 0}}" class="empty-container">
              <t-empty description="æš‚æ— é€šçŸ¥æ•°æ®" />
            </view>
            <view wx:else>
              <t-cell-group>
                <t-cell 
                  wx:for="{{notices}}" 
                  wx:key="id"
                  title="{{item.title}}"
                  description="{{item.department}} Â· {{item.date}}"
                  right-icon="delete"
                  bind:click="onNoticeDelete"
                  data-id="{{item.id}}"
                />
              </t-cell-group>
            </view>
          </view>
        </view>
      </t-tab-panel>
    </t-tabs>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <text class="section-title">ğŸš€ å¿«æ·æ“ä½œ</text>
    <t-cell-group>
      <t-cell title="åˆ·æ–°æ•°æ®" right-icon="refresh" bind:click="refreshData" />
      <t-cell title="ç³»ç»Ÿè®¾ç½®" right-icon="setting" bind:click="openSettings" />
      <t-cell title="è¿”å›é¦–é¡µ" right-icon="home" bind:click="goHome" />
    </t-cell-group>
  </view>
</view>

<!-- ç¡®è®¤å¯¹è¯æ¡† -->
<t-dialog
  visible="{{showDialog}}"
  title="{{dialogTitle}}"
  content="{{dialogContent}}"
  confirm-btn="ç¡®è®¤"
  cancel-btn="å–æ¶ˆ"
  bind:confirm="onDialogConfirm"
  bind:cancel="onDialogCancel"
/> 